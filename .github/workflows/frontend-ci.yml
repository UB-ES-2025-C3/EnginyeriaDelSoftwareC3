# Flujo de trabajo de Integración Continua para el Frontend

name: Frontend CI

# Disparadores: se ejecuta en push y pull requests a la rama main
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  # El único trabajo en este flujo de trabajo se llama "test-frontend"
  test-frontend:
    # El tipo de máquina en la que se ejecutará el trabajo
    runs-on: ubuntu-latest

    # Pasos que componen el trabajo
    steps:
      # 1. Clona el repositorio para que el workflow tenga acceso al código
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2. Configura el entorno de Node.js. Usamos la versión 22.x
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22.x'
          cache: 'npm' # Habilita el cacheo de dependencias de npm
          cache-dependency-path: frontend/package-lock.json

      # 3. Instala las dependencias del proyecto de frontend
      - name: Install frontend dependencies
        run: npm install
        working-directory: ./frontend

      # 4. Ejecuta los tests unitarios del frontend
      - name: Run frontend unit tests
        run: npm run test:unit
        working-directory: ./frontend
